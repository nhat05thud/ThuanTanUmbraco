@inherits UmbracoViewPage<DongMinh.Models.ContactForm>
@{
    Html.EnableClientValidation(true);
    Html.EnableUnobtrusiveJavaScript(true);
    Html.EnableClientValidation(true);
    Html.EnableUnobtrusiveJavaScript(true);
    // Get the current page
    //IPublishedContent objModel = Umbraco.TypedContent(UmbracoContext.Current.PageId);

    // Tells the controller what page to add a comment under.
    //Model.CultureLCID = System.Globalization.CultureInfo.CurrentUICulture.LCID;
    //var langCode = System.Globalization.CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;
}
@using (Ajax.BeginForm("HandleContactForm", "Site", null, new AjaxOptions { UpdateTargetId = "contentAjaxForm", HttpMethod = "POST", OnSuccess = "onSuccess", OnFailure = "onFailure" }, new { id = "contactForm" }))
{
    <div id="contentAjaxForm">
        @Html.Partial("~/Views/Partials/Contact/_Form.cshtml", Model)
    </div>
}
<script src="/scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="/scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#contactForm").on('submit', function () {
            if (!$("input, textarea").hasClass("input-validation-error")) {
                $(".loading_div").css("display", "block");
            }
        });
    });
    function onSuccess() {
        $(".loading_div").css("display", "none");
        $("#divUpdateMessage").removeClass("alert alert-danger").addClass("alert alert-success");
    }
    function onFailure() {
        $(".loading_div").css("display", "none");
        $("#divUpdateMessage").addClass("alert alert-danger");
    }
</script>
